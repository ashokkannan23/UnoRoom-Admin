<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
				<title>unorooms-admin</title>
				<link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
					<link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
						<link rel="stylesheet" href="assets/css/Navigation-with-Search.css">
							<link rel="stylesheet" href="assets/css/styles.css">
								<style>

									.navigation1{
									height:700px;

									}
									@media screen and (max-width: 768px) {
									#navigation{
									height:auto;
									}
									.navbar-brand{
									display:none;
									}
									}

									#landmark_type[disabled],#landmar_type[disabled]{
									background-color: #EBEBE4;
									}
									input[type='text'][disabled]{
									background-color: #EBEBE4;
									}

									#flex-container {
									display: flex;
									flex-wrap: wrap;
									border:1px solid black;


									} 
									input[type="file"] {
									display: block;

									}
									.imageThumb {

									height: 50px;
									width: 70px;
									border: 1px solid;
									cursor: pointer;
									<!-- margin: 3px -15px 0px 12px; -->
									}
									.imageThumbing{
									height: 100px;
									width: 150px;
									border: 1px solid;
									cursor: pointer;
									}


									.pip {
									position: relative;
									display: inline-block;
									}

									.remove {
									position:relative;


									background:red;
									font-size:12px;
									width:20px;

									color: white;
									text-align: center;
									cursor: pointer;
									float:right;
									right:20px;
									<!-- top:3px; -->

									}
									.remove:hover {
									background:black;

									color: white;
									}






									<!-- #landmark_name[disabled]{ -->
									<!-- background-color: #EBEBE4; -->
									<!-- } -->
								</style>
							</head>


							<body>
								<div class="container-fluid">
									<div class="row">
										<div class="col-xl-2 col-lg-2 col-md-3" style="color:#746c6c;background-color:#3f3f3f;"><a href="dashboard1.html"><img src="assets/img/Room_logo.png" style="background-color:#3f3f3f;width:140px;padding:10px;"></a></div>
											<div class="col-xl-10 col-lg-10 col-md-9" style="background-color:#E0E0E0;">
												<div class="btn-group" style="float:right;padding:10px;">
													<button type="button" class="btn btn-default"><i class="fa fa-exclamation-circle" aria-hidden="true"></i></button>
													<button type="button" class="btn btn-default"><i class="fa fa-bell" aria-hidden="true"></i></button>
													<div class="btn-group">
														<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><img src="assets/img/unorooms-admin.png" style="height:30px;width:30px;"> Admin</button>
															<div class="dropdown-menu">
																<a class="dropdown-item" href="#">Recently Book</a>
																<a class="dropdown-item" href="#">Sign Out</a>
															</div>
														</div>
													</div>





												</div>
											</div>
										</div>
										<div>
											<div class="container-fluid">
												<div class="row" style="overflow:hidden;clear:both;">
													<div class="col-lg-2 col-md-3 col-xl-2" id="navigation" style="padding:0px;background-color:rgb(52,58,64);">
														<button  onclick="location.href='dashboard1.html';" class="btn btn-dark btn-block btn-lg d-flex" type="button" style="padding-right:20px;padding-left:20px;font-size:14px;border-radius:none !important;">Dashboard</button>
														<button onclick="location.href='add-building-browse.html';" class="btn btn-dark btn-block btn-lg d-inline-block d-flex" type="button" style="padding-right:20px;padding-left:20px;font-size:14px;margin:0px;">Browse Building</button>
														<button onclick="location.href='add-building.html';" class="btn btn-dark btn-block btn-lg d-inline-block d-flex" type="button" style="padding-right:20px;padding-left:20px;font-size:14px;margin:0px;">Add Building</button>
														<button class="btn btn-dark btn-block btn-lg d-inline-block d-flex" type="button" style="padding-right:20px;padding-left:20px;font-size:14px;margin:0px;">Booking Request</button>
													</div>
													<div class="col-lg-10 col-md-9 col-xl-10">





														<div style="padding:10px;margin:15px;">

															<div class="row" style="color:rgb(13,13,13);background-color:#059dd8;;width:auto;">
																<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col">
																	<h5 class="align-middle" style="color:rgb(252,253,254);padding-top:7px;">Add Building Images</h5>
																</div>
																<!-- <div class="col"><button class="btn btn-warning float-right" type="button"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> EDIT BUILDING</button></div> -->
															</div>

														</div>
														<div  id="div1-wrapper" style="margin:10px 20px;">
															<div class="row" id="div1">

																<div class="col-xl-3 col-lg-3 col-md-3">

																	<!-- <div id="flex-container"> -->
																	<div  class="" id="dialog">
																		<span style="color:red;font-size:12px;" id="dialog2"> </span>
																		<label type="button" class="btn btn-primary" style="margin-top:20px;">
																			Upload Building Images <i class="fa fa-upload" aria-hidden="true"></i>
																			<input type="file"  name="file" id="file"  style="display:none;">
																			</label>

																		</div>


																		<!-- </div> -->

																	</div>

																	<div class="form-group col-xl-4 col-lg-4 col-md-4">

																		Category * <span style="color:red;font-size:12px;" id="Category"> </span> <input type="text" class="form-control form-control-sm" value=""  id="Category_from" name="username">
																		</div>
																		<div class="form-group col-xl-4 col-lg-4 col-md-4">

																			Description * <span style="color:red;font-size:12px;" id="Description"> </span> <input type="text" class="form-control form-control-sm" value=""  id="Description_from" name="username">
																			</div>










																			<div class="col-xl-12" style="margin-top:20px;">

																				<div class="float-left">
																					<!-- <div  class="col-lg-12 col-md-12 col-sm-12 flex-container" id="dialog"> -->
																					<!-- <label type="button" class="btn btn-primary"> -->
																					<!-- Upload Multiple Images <i class="fa fa-upload" aria-hidden="true"></i> -->
																					<!-- <input type="file"  name="file[]" id="image_file"  style="display:none;"  multiple> -->
																					<!-- </label> -->
																					<!-- </div> -->
																				</div>
																				<div class="float-right">
																					<button type="button" id="Go_back_to_building_amenities" style=""  class="btn btn-dark"><i class="fa fa-long-arrow-left" aria-hidden="true"></i> Back</button>
																					<button type="button" id="edit_Landmark" style="display:none;"  class="btn btn-warning"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> EDIT</button>
																					<button type="button" id="Update_landMark" style="display:none;" class="btn btn-info" value="" >UPDATE <i class="fa fa-floppy-o" aria-hidden="true"></i></button>
																					<button type="button" id="Delete_landmark" style="display:none;"  class="btn btn-danger">DELETE <i class="fa fa-trash-o" aria-hidden="true"></i></button>
																					<button type="button" id="save_image"  class="btn btn-info">SAVE <i class="fa fa-floppy-o" aria-hidden="true"></i></button>
																					<button type="button" id="go_to_rooms_apartment" class="btn btn-primary">NEXT <i class="fa fa-long-arrow-right" aria-hidden="true"></i></button>
																				</div>
																			</div>
																			<!-- <div  class="col-lg-12 col-md-12 col-sm-12" id="fetchimage"> -->
																			<!-- </div> -->
																		</div>
																	</div>

																	<div id="delete_image"></div>

																	<div  style="margin:50px 20px;">

																		<table style="width:100%" id="buildingtitle">
																			<thead>
																				<tr>
																					<th>Sr.no</th>
																					<th>IMAGE</th>
																					<th>Category</th>
																					<th>Description</th>
																					<th>Delete</th>
																				</tr>
																			</thead>
																			<tbody>

																			</tbody>
																		</table>





																	</div>



																</div>


															</div>
														</div>
													</div>
													<div class="container-fluid" style="background-color:#01a6f8;bottom:0;right:0;clear:both;">
														<div class="row" style="background-color:#01a6f8;overflow:hidden;clear:both;height:35px;">
															<div class="col" style="overflow:hidden;clear:both;"><p style="color:rgb(247,248,249);vertical-align:middle;height:30px;line-height:30px;font-size:14px;">Copyright Â &copy; 2019 Uno rooms. All rights reserved<br /></p></div>
														</div>
													</div>
												</div>
												<script src="assets/js/jquery.min.js"></script>
												<script src="assets/js/jquery.js"></script>


												<script src="assets/bootstrap/js/bootstrap.min.js"></script>
												<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>

												<script>
													var closebtns = document.getElementsByClassName("close-thin");
													var i;

													for (i = 0; i < closebtns.length; i++) {
															closebtns[i].addEventListener("click", function() {
															this.parentElement.style.display = 'none';
															});
															} 
														</script>
														<script>


															$(document).ready(function() {
															if (window.File && window.FileList && window.FileReader) {
															$("#file").on("change", function(e) {
															var files = e.target.files,
															filesLength = files.length;
															for (var i = 0; i < filesLength; i++) {
																	var f = files[i]
																	var fileReader = new FileReader();
																	fileReader.onload = (function(e) {
																	var file = e.target;
																	$("<div class=\"pip\">"+"<span class=\"remove\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i></span>"+
																		"<img class=\"imageThumbing\" id=\"yourImgId\" src=\"" + e.target.result + "\" title=\"" + file.name + "\"/>" 
																		+
																		"</div>").insertBefore("#dialog");
																	$(".remove").click(function(){
																	$(this).parent(".pip").remove();
																	});

																	// Old code here
																	/*$("<img></img>", {
																	class: "imageThumb",
																	src: e.target.result,
																	title: file.name + " | Click to remove"
																	}).insertAfter("#files").click(function(){$(this).remove();});*/

																	});
																	fileReader.readAsDataURL(f);
																	}
																	});
																	} else {
																	alert("Your browser doesn't support to File API")
																	}
																	});
																</script>
																<script>
																	var yourImg = document.getElementById('yourImgId');
																	if(yourImg && yourImg.style) {
																	yourImg.style.height = '50px';
																	yourImg.style.width = '100px';
																	}
																</script>
																<script>
																	$(document).ready(function(){

																	$(function GetURLParameter(sParam)
																	{
																	var sPageURL = window.location.search.substring(1);
																	var sURLVariables = sPageURL.split('&');
																	for (var i = 0; i < sURLVariables.length; i++)
																			{
																			var sParameterName = sURLVariables[i].split('=');
																			if (sParameterName[0] == sParam)
																			{
																			return sParameterName[1];
																			}
																			}

																			var buildingidvalue= GetURLParameter('building_id');

																			console.log(buildingidvalue);


																			$.getJSON("http://192.168.1.211:3000/facility/" + buildingidvalue, function(results){ 
																			$.each(results, function(){
																			<!-- var imageUrls = images.map(image => 'http://192.168.1.211:3000/facility/' + image.url); -->
																			<!-- console.log(imageUrls); -->
																			var image = '';
																			var imageid = results.images;
																			var imagelength = results.images.length;
																			var imageUrls = imageid.map(image => 'http://192.168.1.211:3000/facility/' + image.url);
																			<!-- console.log(imageUrls); -->
																			var display = results.images;
																			<!-- console.log(imageid); -->

																			for(i=0;i<=imagelength-1;i++){


																					image +=    '<tr class="Delete_LandMark">'+
																						'<td>' + (i + 1) + '</td>'+
																						'<td><img class="imageThumb" id="yourImgId" src=\"' + imageUrls[i] + '\" title="" + file.name + ""/></td>'+
																						'<td><button  class="btn btn-light buildingname" type="button" value="'+ display[i].category +'">'+ display[i].category  +'</button></td>'+
																						'<td><button  class="btn btn-light buildingname" type="button" value="'+ display[i].description +'">'+ display[i].description +'</button></td>'+

																						'<td><button  class="btn btn-primary btn-sm btn-danger Delete_bul" value="'+ display[i]._id +'" type="button">Delete</button></td>'+
																						'</tr>';



																					<!-- '<div class="pip"><span class="remove"><i class="fa fa-times" aria-hidden="true"></i></span>'+ -->
																					<!-- '<img class="imageThumb" id="yourImgId" src=\"' + imageUrls[i] + '\" title="" + file.name + ""/>'+ -->
																					<!-- '<p style ="text-align:center";>'+ display[i].description +'</p>'+ -->
																					<!-- '</div>'; -->
																					<!-- console.log(results[i].nearby.locationtype); -->


																					}; 

																					$("#buildingtitle > tbody").html(image);
																				var tr = $(image).closest('tr');
																				console.log(tr.length);

																				if((tr.length<=3)){
																						$("#navigation").addClass("navigation1");
																						}


																						});
																						});
																						});
																						});
																					</script>
																					<script>
																						$(document).ready(function(){
																						$(function GetURLParameter(sParam)
																						{
																						var sPageURL = window.location.search.substring(1);
																						var sURLVariables = sPageURL.split('&');
																						for (var i = 0; i < sURLVariables.length; i++)
																								{
																								var sParameterName = sURLVariables[i].split('=');
																								if (sParameterName[0] == sParam)
																								{
																								return sParameterName[1];
																								}
																								}

																								var buildingidvalue= GetURLParameter('building_id');

																								console.log(buildingidvalue);

																								$("#buildingtitle").on('click','.Delete_bul',function(){

																								var currentRow=$(this).closest("tr"); 


																								var col2=currentRow.find("td:eq(3)").text();
																								var col3=currentRow.find("#yourImgId").attr('src');
																								console.log(col3);
																								var url_id = $(this).val();
																								console.log(url_id);
																								<!-- var show_image = ''; -->
                                                                                                <!-- var show_image = '<img class="imageThumb" id="yourImgId" src=\"' + col3 + '\" title="" + file.name + ""/>'; -->
																								<!-- $('#delete_image').html(show_image); -->

																								
																								var data="Are you sure to delete this Image?"; 
																								<!-- alert(data); -->
																								if(confirm(data)){

																								console.log(col2,url_id);

																								$.ajax({
																								type: "DELETE",
																								url: 'http://192.168.1.211:3000/facility/image/' + buildingidvalue + "/" + url_id,
																								data: {_method: 'delete'},
																								success: function (data) {
																								console.log(data);


																								$(".Delete_LandMark" + url_id).remove();
																								location.reload();
																								},
																								error: function (data) {
																								console.log('Error:', data);
																								}

																								});

																								}

																								}); 

																								});	
																								});


																							</script>








																							<script>
																								$(document).on('click','#go_to_rooms_apartment',function(){
																								$(function GetURLParameter(sParam)
																								{
																								var sPageURL = window.location.search.substring(1);
																								var sURLVariables = sPageURL.split('&');
																								for (var i = 0; i < sURLVariables.length; i++)
																										{
																										var sParameterName = sURLVariables[i].split('=');
																										if (sParameterName[0] == sParam)
																										{
																										return sParameterName[1];
																										}
																										}

																										var buildingidvalue= GetURLParameter('building_id');
																										window.location.href = "http://localhost/unoroom-admin/add-building-rooms-apartment.html?building_id=" + buildingidvalue;


																										});

																										});


																									</script>
																									<script>
																										$(document).on('click','#Go_back_to_building_amenities',function(){
																										$(function GetURLParameter(sParam)
																										{
																										var sPageURL = window.location.search.substring(1);
																										var sURLVariables = sPageURL.split('&');
																										for (var i = 0; i < sURLVariables.length; i++)
																												{
																												var sParameterName = sURLVariables[i].split('=');
																												if (sParameterName[0] == sParam)
																												{
																												return sParameterName[1];
																												}
																												}

																												var buildingidvalue= GetURLParameter('building_id');
																												window.location.href = "http://localhost/unoroom-admin/add-building-amenities.html?building_id=" + buildingidvalue;


																												});

																												});


																											</script>




																										</body>
																									</html>
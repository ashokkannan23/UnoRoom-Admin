<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
				<title>unorooms-admin</title>
				<link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
					<link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
						<link rel="stylesheet" href="assets/css/Navigation-with-Search.css">
							<link rel="stylesheet" href="assets/css/styles.css">
								<style>

									.navigation1{
									height:700px;

									}
									@media screen and (max-width: 768px) {
									#navigation{
									height:auto;
									}
									.navbar-brand{
									display:none;
									}
									}

									#landmark_type[disabled],#landmar_type[disabled]{
									background-color: #EBEBE4;
									}
									input[type='text'][disabled]{
									background-color: #EBEBE4;
									}
									<!-- #landmark_name[disabled]{ -->
									<!-- background-color: #EBEBE4; -->
									<!-- } -->
								</style>
							</head>


							<body>
								<div class="container-fluid">
									<div class="row">
										<div class="col-xl-2 col-lg-2 col-md-3" style="color:#746c6c;background-color:#3f3f3f;"><a href="dashboard1.html"><img src="assets/img/Room_logo.png" style="background-color:#3f3f3f;width:140px;padding:10px;"></a></div>
											<div class="col-xl-10 col-lg-10 col-md-9" style="background-color:#E0E0E0;">
												<div class="btn-group" style="float:right;padding:10px;">
													<button type="button" class="btn btn-default"><i class="fa fa-exclamation-circle" aria-hidden="true"></i></button>
													<button type="button" class="btn btn-default"><i class="fa fa-bell" aria-hidden="true"></i></button>
													<div class="btn-group">
														<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><img src="assets/img/unorooms-admin.png" style="height:30px;width:30px;"> Admin</button>
															<div class="dropdown-menu">
																<a class="dropdown-item" href="#">Recently Book</a>
																<a class="dropdown-item" href="#">Sign Out</a>
															</div>
														</div>
													</div>





												</div>
											</div>
										</div>
										<div>
											<div class="container-fluid">
												<div class="row" style="overflow:hidden;clear:both;">
													<div class="col-lg-2 col-md-3 col-xl-2" id="navigation" style="padding:0px;background-color:rgb(52,58,64);">
														<button  onclick="location.href='dashboard1.html';" class="btn btn-dark btn-block btn-lg d-flex" type="button" style="padding-right:20px;padding-left:20px;font-size:14px;border-radius:none !important;">Dashboard</button>
														<button onclick="location.href='add-building-browse.html';" class="btn btn-dark btn-block btn-lg d-inline-block d-flex" type="button" style="padding-right:20px;padding-left:20px;font-size:14px;margin:0px;">Browse Building</button>
														<button onclick="location.href='add-building.html';" class="btn btn-dark btn-block btn-lg d-inline-block d-flex" type="button" style="padding-right:20px;padding-left:20px;font-size:14px;margin:0px;">Add Building</button>
														<button class="btn btn-dark btn-block btn-lg d-inline-block d-flex" type="button" style="padding-right:20px;padding-left:20px;font-size:14px;margin:0px;">Booking Request</button>
													</div>
													<div class="col-lg-10 col-md-9 col-xl-10">





														<div style="padding:10px;margin:15px;">

															<div class="row" style="color:rgb(13,13,13);background-color:#059dd8;;width:auto;">
																<div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col">
																	<h5 class="align-middle" style="color:rgb(252,253,254);padding-top:7px;">Add Building Landmark</h5>
																</div>
																<!-- <div class="col"><button class="btn btn-warning float-right" type="button"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> EDIT BUILDING</button></div> -->
															</div>

														</div>
														<div  id="div1-wrapper" style="margin:10px 20px;">
															<div class="row" id="div1">


																<div class="form-group col-xl-6 col-lg-6 col-md-6">

																	Landmark Type* <select class="form-control form-control-sm" id="landmark_type"  name="sellist1">

																	</select>

																</div>
																<div class="form-group col-xl-6 col-lg-6 col-md-6">

																	Landmark Name* <span style="color:red;font-size:12px;" id="land_Mark"></span> <input type="text" class="form-control form-control-sm"  id="landmark_name" value=""  placeholder="" name="text1"> 
																	</div>


																	<div class="form-group col-xl-6 col-lg-6 col-md-6">
																		Latitude* <span style="color:red;font-size:12px;"id="latitude-code"></span> <input type="text" class="form-control form-control-sm"  id="landmark_lat" value=""  placeholder="" name="text1">
																		</div>
																		<div class="form-group col-xl-6 col-lg-6 col-md-6">
																			Longitude* <span style="color:red;font-size:12px;"id="longitude-code"></span> <input type="text" class="form-control form-control-sm" id="landmark_log" value=""  placeholder="" name="text1">
																			</div>
																			<div class="form-group col-xl-6 col-lg-6 col-md-6">

																				Distance from Building (Metre)* <span style="color:red;font-size:12px;" id="distance_Metre"> </span> <input type="text" class="form-control form-control-sm" value=""  id="Distance_from" name="username">
																				</div>


																				<div class="col-xl-12">

																					<div class="float-left">

																						<!-- <button type="button" id="add_landmark" style="display:none;" class="btn btn-success"><i class="fa fa-plus-circle" aria-hidden="true"></i> ADD LANDMARK</button> -->
																					</div>
																					<div class="float-right">
																						<button type="button" id="Go_back_to_building_GENERAL" style=""  class="btn btn-dark"><i class="fa fa-long-arrow-left" aria-hidden="true"></i> BACK</button>
																						<button type="button" id="edit_Landmark" style="display:none;"  class="btn btn-warning"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> EDIT</button>
																						<button type="button" id="Update_landMark" style="display:none;" class="btn btn-info" value="" >UPDATE <i class="fa fa-floppy-o" aria-hidden="true"></i></button>
																						<button type="button" id="Delete_landmark" style="display:none;"  class="btn btn-danger">DELETE <i class="fa fa-trash-o" aria-hidden="true"></i></button>
																						<button type="button" id="save_landmark"  class="btn btn-info">SAVE <i class="fa fa-floppy-o" aria-hidden="true"></i></button>
																						<button type="button" id="go_to_amenities" class="btn btn-primary">NEXT <i class="fa fa-long-arrow-right" aria-hidden="true"></i></button>
																					</div>
																				</div>
																			</div>
																		</div>

																		<div  style="margin:50px 20px;">

																			<table style="width:100%" id="buildingtitle">
																				<thead>
																					<tr>
																						<th>Sr.no</th>
																						<th>Landmark Type</th>
																						<th>Landmark Name</th>
																						<th>latitude</th>
																						<th>longitude</th>
																						<th>Distance in meters</th>

																						<th>Delete</th>
																					</tr>
																				</thead>
																				<tbody>

																				</tbody>
																			</table>



																		</div>



																	</div>


																</div>
															</div>
														</div>
														<div class="container-fluid" style="background-color:#01a6f8;bottom:0;right:0;clear:both;">
															<div class="row" style="background-color:#01a6f8;overflow:hidden;clear:both;height:35px;">
																<div class="col" style="overflow:hidden;clear:both;"><p style="color:rgb(247,248,249);vertical-align:middle;height:30px;line-height:30px;font-size:14px;">Copyright Â &copy; 2019 Uno rooms. All rights reserved<br /></p></div>
															</div>
														</div>
													</div>
													<script src="assets/js/jquery.min.js"></script>

													<script src="assets/js/landmark.js"></script>
													<script src="assets/js/secondlandmark.js"></script>

													<script src="assets/bootstrap/js/bootstrap.min.js"></script>
													<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>


													<!-- --Select City Data -->
													<script>
														$(document).ready(function(){


														$.getJSON("http://192.168.1.211:3000/meta/locationtype", function(result){
														$.each(result, function(){

														var landmatk = '';

														var landmarkplace = result.length;
														for(i=0;i<=landmarkplace-1;i++){

																landmatk +='<option value="'+ result[i] +'">'+ result[i].replace(/([A-Z])/g, ' $1').trim() +'</option>';


																};

																$("#landmark_type").html(landmatk);




																});
																});


																});

															</script>
															<script>
																$(document).ready(function(){

																$(function GetURLParameter(sParam)
																{
																var sPageURL = window.location.search.substring(1);
																var sURLVariables = sPageURL.split('&');
																for (var i = 0; i < sURLVariables.length; i++)
																		{
																		var sParameterName = sURLVariables[i].split('=');
																		if (sParameterName[0] == sParam)
																		{
																		return sParameterName[1];
																		}
																		}

																		var buildingidvalue= GetURLParameter('building_id');

																		console.log(buildingidvalue);


																		$.getJSON("http://192.168.1.211:3000/facility/" + buildingidvalue, function(results){
																		$.each(results, function(){
																		var Landmarktitle = '';
																		var Landmarkid = results.nearby.length;
																		var display = results.nearby;
																		<!-- console.log(Landmarkid); -->

																		for(i=0;i<=Landmarkid-1;i++){


																				Landmarktitle +=    '<tr class="Delete_LandMark">'+
																					'<td>' + (i + 1) + '</td>'+
																					'<td><button  class="btn btn-light buildingname locationtype" type="button" value="'+ display[i].locationtype +'">'+ display[i].locationtype.replace(/([A-Z])/g, ' $1').trim() +'</button></td>'+
																					'<td><button  class="btn btn-light buildingname locationname" type="button" value="'+ display[i].name +'">'+ display[i].name +'</button></td>'+
																					'<td><button  class="btn btn-light buildingname" type="button" value="'+ display[i].location.latitude +'">'+ display[i].location.latitude +'</button></td>'+
																					'<td><button  class="btn btn-light buildingname" type="button" value="'+ display[i].location.longitude +'">'+ display[i].location.longitude +'</button></td>'+
																					'<td><button  class="btn btn-light buildingname" type="button" value="'+ display[i].distanceinmeters +'">'+ display[i].distanceinmeters +'</button></td>'+

																					'<td><button  class="btn btn-primary btn-sm btn-danger Delete_bul" value="'+ display[i]._id +'" type="button">Delete</button></td>'+
																					'</tr>';
																				<!-- console.log(results[i].nearby.locationtype); -->


																				}; 

																				$("#buildingtitle > tbody").html(Landmarktitle);
																			var tr = $(Landmarktitle).closest('tr');
																			console.log(tr.length);

																			if((tr.length<=3)){
																			$("#navigation").addClass("navigation1");
																			}


																			});
																			});
																			});
																			});
																		</script>

																		<script>
																			$(document).ready(function(){
																			$(function GetURLParameter(sParam)
																			{
																			var sPageURL = window.location.search.substring(1);
																			var sURLVariables = sPageURL.split('&');
																			for (var i = 0; i < sURLVariables.length; i++)
																					{
																					var sParameterName = sURLVariables[i].split('=');
																					if (sParameterName[0] == sParam)
																					{
																					return sParameterName[1];
																					}
																					}

																					var buildingidvalue= GetURLParameter('building_id');

																					console.log(buildingidvalue);

																					$("#buildingtitle").on('click','.Delete_bul',function(){

																					var currentRow=$(this).closest("tr"); 


																					var col2=currentRow.find("td:eq(2)").text(); 
																					var url_id = $(this).val();
																					console.log(url_id);
																					var data="Are you sure to delete this Landmark?"+"\n"+col2; 
																					<!-- alert(data); -->
																					if(confirm(data)){

																					console.log(col2,url_id);

																					$.ajax({
																					type: "DELETE",
																					url: 'http://192.168.1.211:3000/facility/nearby/' + buildingidvalue + "/" + url_id,
																					data: {_method: 'delete'},
																					success: function (data) {
																					console.log(data);


																					$(".Delete_LandMark" + url_id).remove();
																					location.reload();
																					},
																					error: function (data) {
																					console.log('Error:', data);
																					}

																					});

																					}

																					}); 

																					});	
																					});


																				</script>
																				<script>
																					$(document).ready(function(){
																					$("#buildingtitle").on('click','.buildingname',function(){
																					var currentRow=$(this).closest("tr"); 

																					var landmarkid=currentRow.find(".Delete_bul").val();
																					var landmarktype=currentRow.find(".locationtype").val();

																					console.log(landmarkid,landmarktype);

																					$(function GetURLParameter(sParam)
																					{
																					var sPageURL = window.location.search.substring(1);
																					var sURLVariables = sPageURL.split('&');
																					for (var i = 0; i < sURLVariables.length; i++)
																							{
																							var sParameterName = sURLVariables[i].split('=');
																							if (sParameterName[0] == sParam)
																							{
																							return sParameterName[1];
																							}
																							}

																							var buildingidvalue= GetURLParameter('building_id');

																							console.log(buildingidvalue);

																							$.getJSON("http://192.168.1.211:3000/meta/locationtype", function(result){
																							$.each(result, function(){

																							var landmatk = '';

																							var landmarkplace = result.length;
																							for(i=0;i<=landmarkplace-1;i++){

																									landmatk +='<option value="'+ result[i] +'">'+ result[i].replace(/([A-Z])/g, ' $1').trim() +'</option>';


																									};

																									$("#landmark_type").html(landmatk);
																									$("#landmark_type option").each(function(){
																									if ($(this).val() == landmarktype){
																									$(this).attr("selected","selected");
																									}
																									});



																									});
																									});











																									$.getJSON("http://192.168.1.211:3000/facility/" + buildingidvalue, function(results){

																									var edited = results.nearby;

																									for (var i in edited) {



																									if (( landmarkid == edited[i]._id)){

																									$("#landmark_name").attr("value",edited[i].name);
																									$("#landmark_lat").attr("value",edited[i].location.latitude);

																									$("#landmark_log").attr("value",edited[i].location.longitude);
																									$("#Distance_from").attr("value",edited[i].distanceinmeters);





																									}	
																									}
																									});
																									if (history.pushState) {
																									var newurl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?building_id=' + buildingidvalue + "&currentlandmark=" + landmarkid;
																									window.history.pushState({path:newurl},'',newurl);
																									}
																									
																									
																									});
																									$("#landmark_type").attr('disabled','disabled');
																									$("#landmark_name").attr('disabled','disabled');
																									$("#landmark_lat").attr('disabled','disabled');
																									$("#landmark_log").attr('disabled','disabled');
																									$("#Distance_from").attr('disabled','disabled');

																									$("#edit_Landmark").show();

																									$("#save_landmark").css('display','none');


																									


																									});
																									});
																								</script>
																								
																								<script>
															$(document).on('click','#Go_back_to_building_GENERAL',function(){
															$(function GetURLParameter(sParam)
															{
															var sPageURL = window.location.search.substring(1);
															var sURLVariables = sPageURL.split('&');
															for (var i = 0; i < sURLVariables.length; i++)
																	{
																	var sParameterName = sURLVariables[i].split('=');
																	if (sParameterName[0] == sParam)
																	{
																	return sParameterName[1];
																	}
																	}

																	var buildingidvalue= GetURLParameter('building_id');
																	console.log(buildingidvalue);
																	
																	$.getJSON("http://192.168.1.211:3000/facility/" + buildingidvalue, function(results){ 
																		$.each(results, function(){
																		var city = results.address.city;
																		var locality = results.address.locality;
																	
																	    console.log(city,locality);
																	window.location.href = "http://localhost/unoroom-admin/view-building-browse.html?building_id=" + buildingidvalue + "&city=" + city + "&locality=" + locality;
																	});

																	});


																	});

																	});


																</script>


																							</body>
																						</html>